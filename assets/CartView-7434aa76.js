import{_ as g,o as d,c as l,d as t,F as h,f as _,g as x,t as n,a as f,h as m,v}from"./index-256df17e.js";const{VITE_APP_URL:r,VITE_APP_PATH:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"ziyi",BASE_URL:"/hex-vue-hw-week6/",MODE:"production",DEV:!1,PROD:!0},I={data(){return{products:[],productId:"",cart:[],loadingItem:""}},methods:{getCart(){this.$http.get(`${r}/v2/api/${i}/cart`).then(e=>{this.cart=e.data.data})},updateCartItem(e){const c={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${r}/v2/api/${i}/cart/${e.id}`,{data:c}).then(p=>{this.getCart(),this.loadingItem=""})},deleteCartItem(e){this.loadingItem=e.id,this.$http.delete(`${r}/v2/api/${i}/cart/${e.id}`).then(c=>{this.getCart(),this.loadingItem=""})}},mounted(){this.getCart()}},C={class:"table align-middle"},y=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",{class:"text-end"},"單價"),t("th",{class:"text-end"},"小計")])],-1),b=["onClick"],P=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),V={class:"input-group input-group-sm"},$={class:"input-group mb-3"},k=["onUpdate:modelValue","onChange","disabled"],E=["value"],A={class:"text-end"},T={class:"text-end"},w=t("td",{colspan:"4",class:"text-end"},"總計",-1),D={class:"text-end"},U=t("td",{colspan:"4",class:"text-end text-success"},"折扣價",-1),q={class:"text-end text-success"};function B(e,c,p,L,o,u){return d(),l("div",null,[t("table",C,[y,t("tbody",null,[o.cart.carts?(d(!0),l(h,{key:0},_(o.cart.carts,s=>(d(),l("tr",{key:s.id+1234},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>u.deleteCartItem(s)},[P,f(" x ")],8,b)]),t("td",null,n(s.product.title),1),t("td",null,[t("div",V,[t("div",$,[m(t("select",{name:"",id:"","onUpdate:modelValue":a=>s.qty=a,class:"form-select",onChange:a=>u.updateCartItem(s),disabled:s.id===o.loadingItem},[(d(),l(h,null,_(20,a=>t("option",{value:a,key:`${a}1234`},n(a),9,E)),64))],40,k),[[v,s.qty]])])])]),t("td",A,n(s.product.price),1),t("td",T,n(s.final_total),1)]))),128)):x("",!0)]),t("tfoot",null,[t("tr",null,[w,t("td",D,n(o.cart.total),1)]),t("tr",null,[U,t("td",q,n(o.cart.final_total),1)])])])])}const N=g(I,[["render",B]]);export{N as default};
