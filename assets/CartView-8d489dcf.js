import{_ as g,o as d,c as l,d as t,F as _,f as h,g as x,t as n,a as f,h as m,v as I}from"./index-611c679c.js";const{VITE_APP_URL:r,VITE_APP_PATH:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"ziyi",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},v={data(){return{products:[],productId:"",cart:[],loadingItem:""}},methods:{getCart(){this.$http.get(`${r}/v2/api/${i}/cart`).then(e=>{this.cart=e.data.data})},updateCartItem(e){const c={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${r}/v2/api/${i}/cart/${e.id}`,{data:c}).then(p=>{this.getCart(),this.loadingItem=""})},deleteCartItem(e){this.loadingItem=e.id,this.$http.delete(`${r}/v2/api/${i}/cart/${e.id}`).then(c=>{this.getCart(),this.loadingItem=""})}},mounted(){this.getCart()}},C={class:"table align-middle"},y=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",{class:"text-end"},"單價"),t("th",{class:"text-end"},"小計")])],-1),b=["onClick"],P=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),V={class:"input-group input-group-sm"},$={class:"input-group mb-3"},E=["onUpdate:modelValue","onChange","disabled"],k=["value"],A={class:"text-end"},T={class:"text-end"},D=t("td",{colspan:"4",class:"text-end"},"總計",-1),U={class:"text-end"},q=t("td",{colspan:"4",class:"text-end text-success"},"折扣價",-1),B={class:"text-end text-success"};function L(e,c,p,R,o,u){return d(),l("div",null,[t("table",C,[y,t("tbody",null,[o.cart.carts?(d(!0),l(_,{key:0},h(o.cart.carts,s=>(d(),l("tr",{key:s.id+1234},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>u.deleteCartItem(s)},[P,f(" x ")],8,b)]),t("td",null,n(s.product.title),1),t("td",null,[t("div",V,[t("div",$,[m(t("select",{name:"",id:"","onUpdate:modelValue":a=>s.qty=a,class:"form-select",onChange:a=>u.updateCartItem(s),disabled:s.id===o.loadingItem},[(d(),l(_,null,h(20,a=>t("option",{value:a,key:`${a}1234`},n(a),9,k)),64))],40,E),[[I,s.qty]])])])]),t("td",A,n(s.product.price),1),t("td",T,n(s.final_total),1)]))),128)):x("",!0)]),t("tfoot",null,[t("tr",null,[D,t("td",U,n(o.cart.total),1)]),t("tr",null,[q,t("td",B,n(o.cart.final_total),1)])])])])}const N=g(v,[["render",L]]);export{N as default};
